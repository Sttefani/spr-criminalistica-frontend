<div class="form-container">
  <a mat-button routerLink="/authorities" class="back-button">
    <i class="material-icons">arrow_back</i>
    Voltar para a Lista
  </a>

  @if (!isLoading) {
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ pageTitle }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="authority-form">
          <!-- Campo Nome -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Nome Completo</mat-label>
            <input matInput formControlName="name" required>
          </mat-form-field>

          <!-- Campo Título -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Título</mat-label>
            <input matInput formControlName="title" placeholder="Ex: Delegado de Polícia, Juiz de Direito" required>
          </mat-form-field>

          <!-- Campo Opcional: Vincular Usuário -->
          <mat-form-field appearance="outline" class="form-field full-width">
            <mat-label>Vincular a um Usuário (Opcional)</mat-label>
            <mat-select formControlName="userId">
              <mat-option [value]="null">Nenhum</mat-option>
              @for (user of users; track user.id) {
                <mat-option [value]="user.id">
                  {{ user.name }} ({{ user.email }})
                </mat-option>
              }
            </mat-select>
          </mat-form-field>

          <div class="actions-container">
            <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
              Salvar
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  }

  @if (isLoading) {
    <div class="spinner-container">
      <mat-spinner></mat-spinner>
    </div>
  }
</div>
