<div class="edit-container">
  <!-- Header com botão voltar e título -->
  <div class="header">
    <button mat-icon-button routerLink="/exam-types" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="header-content">
      <h1>{{ pageTitle }}</h1>
    </div>
  </div>

  <!-- Card do formulário -->
  @if (!isLoading) {
    <mat-card class="form-card">
      <mat-card-content>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">

          <!-- Campo Nome -->
          <mat-form-field appearance="outline">
            <mat-label>Nome do Tipo de Exame</mat-label>
            <input matInput formControlName="name" placeholder="Ex: Exame de Eficiência de Disparo" required>
            <mat-icon matPrefix>science</mat-icon>
            @if (form.get('name')?.hasError('required')) {
              <mat-error>O nome é obrigatório</mat-error>
            }
          </mat-form-field>

          <!-- Campo Sigla -->
          <mat-form-field appearance="outline">
            <mat-label>Sigla</mat-label>
            <input matInput formControlName="acronym" placeholder="Ex: EFI" required>
            <mat-icon matPrefix>short_text</mat-icon>
            @if (form.get('acronym')?.hasError('required')) {
              <mat-error>A sigla é obrigatória</mat-error>
            }
          </mat-form-field>

          <!-- Campo Descrição (Opcional) -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Descrição (Opcional)</mat-label>
            <textarea matInput formControlName="description" rows="4"></textarea>
            <mat-icon matPrefix>description</mat-icon>
          </mat-form-field>

        </form>
      </mat-card-content>

      <!-- Ações do formulário -->
      <mat-card-actions align="end">
        <button mat-button routerLink="/exam-types">
          <mat-icon>close</mat-icon>
          Cancelar
        </button>
        <button mat-raised-button color="primary"
                (click)="onSubmit()"
                [disabled]="form.invalid">
          <mat-icon>save</mat-icon>
          Salvar
        </button>
      </mat-card-actions>
    </mat-card>
  }

  <!-- Tela de Carregamento -->
  @if (isLoading) {
    <div class="loading">
      <mat-spinner></mat-spinner>
      <p>Carregando dados do tipo de exame...</p>
    </div>
  }
</div>
