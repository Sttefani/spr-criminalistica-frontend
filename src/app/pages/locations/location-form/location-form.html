<div class="edit-container">
  <!-- Header com botão voltar e título -->
  <div class="header">
    <button mat-icon-button routerLink="/locations" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="header-content">
      <h1>{{ pageTitle }}</h1>
    </div>
  </div>

  <!-- Card do formulário -->
  @if (!isLoading) {
    <mat-card class="form-card">
      <mat-card-content>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
          <!-- Nome do Local -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nome do Local/Serviço</mat-label>
            <input matInput formControlName="name" required>
            <mat-icon matPrefix>business</mat-icon>
            @if (form.get('name')?.hasError('required')) {
              <mat-error>O nome é obrigatório</mat-error>
            }
          </mat-form-field>

          <!-- Descrição do Local (opcional) -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Descrição</mat-label>
            <textarea matInput formControlName="description"></textarea>
            <mat-icon matPrefix>description</mat-icon>
          </mat-form-field>
        </form>
      </mat-card-content>

      <!-- Ações do formulário -->
      <mat-card-actions align="end">
        <button mat-button routerLink="/locations">
          <mat-icon>close</mat-icon>
          Cancelar
        </button>

        <!-- BOTÃO SALVAR CORRIGIDO -->
        <button
          mat-raised-button
          color="primary"
          (click)="onSubmit()"
          [disabled]="form.invalid || isSaving">
          @if (isSaving) {
            <mat-spinner diameter="20" style="margin-right: 8px; display: inline-block;"></mat-spinner>
            Salvando...
          } @else {
            <ng-container>
              <mat-icon>save</mat-icon>
              Salvar
            </ng-container>
          }
        </button>
      </mat-card-actions>
    </mat-card>
  }

  <!-- Tela de Carregamento -->
  @if (isLoading) {
    <div class="loading">
      <mat-spinner></mat-spinner>
      <p>Carregando dados do local...</p>
    </div>
  }
</div>
