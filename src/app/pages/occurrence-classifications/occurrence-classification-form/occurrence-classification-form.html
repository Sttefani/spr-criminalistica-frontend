<div class="edit-container">
  <!-- Header com botão voltar e título -->
  <div class="header">
    <button mat-icon-button routerLink="/occurrence-classifications" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="header-content">
      <h1>{{ pageTitle }}</h1>
    </div>
  </div>

  <!-- Card do formulário -->
  @if (!isLoading) {
    <mat-card class="form-card">
      <mat-card-content>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">

          <!-- Campo Código -->
          <mat-form-field appearance="outline">
            <mat-label>Código</mat-label>
            <input matInput formControlName="code" placeholder="Ex: 001.1, ATVF" required>
            <mat-icon matPrefix>pin</mat-icon>
            @if (form.get('code')?.hasError('required')) {
              <mat-error>O código é obrigatório</mat-error>
            }
          </mat-form-field>

          <!-- Campo Nome -->
          <mat-form-field appearance="outline">
            <mat-label>Nome da Classificação</mat-label>
            <input matInput formControlName="name" placeholder="Ex: Acidente de Trânsito com Vítima Fatal" required>
            <mat-icon matPrefix>label</mat-icon>
            @if (form.get('name')?.hasError('required')) {
              <mat-error>O nome é obrigatório</mat-error>
            }
          </mat-form-field>

          <!-- Campo Grupo (Opcional) -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Grupo (Opcional)</mat-label>
            <input matInput formControlName="group" placeholder="Ex: Acidentes de Trânsito">
            <mat-icon matPrefix>folder</mat-icon>
          </mat-form-field>

        </form>
      </mat-card-content>

      <!-- Ações do formulário -->
      <mat-card-actions align="end">
        <button mat-button routerLink="/occurrence-classifications">
          <mat-icon>close</mat-icon>
          Cancelar
        </button>
        <button mat-raised-button color="primary"
                (click)="onSubmit()"
                [disabled]="form.invalid">
          <mat-icon>save</mat-icon>
          Salvar
        </button>
      </mat-card-actions>
    </mat-card>
  }

  <!-- Tela de Carregamento -->
  @if (isLoading) {
    <div class="loading">
      <mat-spinner></mat-spinner>
      <p>Carregando dados da classificação...</p>
    </div>
  }
</div>
